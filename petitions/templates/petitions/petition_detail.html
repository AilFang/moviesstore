{% extends "base.html" %}
{% block content %}
<h1>{{ petition.title }}</h1>
<p>{{ petition.description }}</p>
<p>Created by: {{ petition.created_by }} on {{ petition.created_at }}</p>
<p>Yes: {{ petition.yes_count }} | No: {{ petition.no_count }}</p>

{% if user.is_authenticated %}
  {% if user_vote %}
    <p>Your vote: {{ user_vote.choice }}</p>
  {% else %}
    <form action="{% url 'petitions:vote' petition.pk %}" method="post">
      {% csrf_token %}
      <button name="choice" value="yes" type="submit">Vote Yes</button>
      <button name="choice" value="no" type="submit">Vote No</button>
    </form>
  {% endif %}
{% else %}
  <p><a href="{% url 'login' %}?next={{ request.path }}">Log in to vote</a></p>
{% endif %}
<a href="{% url 'petitions:list' %}">Back</a>
{% endblock %}
